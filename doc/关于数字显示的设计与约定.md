# 关于数字显示的设计与约定

### 不同类型的数量显示

- 待办数量
- 待阅数量
- 未读消息数量
- 更新数据量

### 显示的位置

- 主导航栏的导航菜单项
- 次导航栏的导航菜单项
- 消息栏（包括即时通讯）
- Widget标题栏

### 显示方式

- 红点——页面内容有更新数据，提醒用户查看，打开页面后消失
- 数量——页面内、Widget中有未办或未阅内容，消息栏中有未读消息，查看相应内容后，数量减少，直至消失

### 数量更新及消息推送

数量由服务根据具体业务要求，统计并促发数量更新事件，推送到前端，具体数量统计对象可由业务设计，每个业务模块可以使用一个或多个数量对象，每个数量对象对应一个key，key类似“模块名_子模块名_具体业务名称”，如果出现分用户的数据，可在key中包含用户name，全局不可重复

数量消息按key推送，及每个key对应的数量对象变化后，推送到前端。前端订阅消息，按key保存在全局对象badge中

### badge数据对象
```js
{
  isDot: false,   // 是否用小红点显示
  value: 12,      // 数量
  data: []        // 对应的数据集
}
```

### 全局使用badge中的数据

直接根据key获取相应数据对象，显示即可

### Widget中如何使用badge中的数据

Widget实例配置中，可以设置badge的key；Widget根据设置，读取badge对应的值，如果key不存在或读取的值为0，则不显示

### 导航栏上如何使用badge中的数据

导航栏上对应的badge中的数据，来源于页面上的widget对应的数据，如果widget对应的数据显示为数字，则页面显示也为数字，值为显示数字的badge之和；如果数字之和为0，或没有显示为数字的badge，则统计液面上所有显示为小红点的badge之和，如果大于零，则页面导航栏显示小红点。

如果导航栏对应的是文件夹，则来源于子文件夹或页面对应数据之和

### Badge数字内容如何更新？

- #### 全量更新

- #### 增量更新